layui.use(['jquery','form','element','table','upload','layer','carousel'],function(){var $=layui.jquery,layer=layui.layer,carousel=layui.carousel,form=layui.form,element=layui.element,table=layui.table,upload=layui.upload;$(".search").keypress(function(event){if(event.which===13){let val=$(this).val();layer.msg('正在查询: “'+val+'” 相关内容');}})
$('.user-item').on('click',function(){if($(this).hasClass('an')){$(this).removeClass('an').children('i').css("transform","rotate(0deg)");$(this).parent().children('.child-nav').stop().hide();}else{$(this).parent().children('.child-nav').stop().show();$(this).addClass('an').children('i').css("transform","rotate(180deg)");}
window.event?window.event.cancelBubble=true:e.stopPropagation();})
$('.tpl-dent').on('click',function(){let type=null;if($('.tpl-app').hasClass('tpl-small-app')){$('.tpl-app').removeClass('tpl-small-app');$(this).children('i').css("transform","rotate(0)");type=0;}else{$('.tpl-app').addClass('tpl-small-app');$(this).children('i').css("transform","rotate(180deg)");type=1;}
$.ajax({url:'xxx/app_dent',type:'post',data:{type:type},success:function(d){console.log(d);}})})
$(document).on("click",function(){if($('.tpl-header .child-nav').is(':visible')){$('.user-item').removeClass('an');$('.caret').css("transform","rotate(0deg)");$(".tpl-header .child-nav").hide();}})
$('.logout').on('click',function(){$.ajax({url:"../user/logout",type:'post',success:function(d){layer.msg(d.msg);window.location.href="../user/login";}})})
$('.theme').on('click',function(){$('body').append('<div class="tpl-shade"></div>');$(".tpl-right-bar").css('right',0);})
$(document).on('click','.tpl-shade',function(){$(this).remove();$('.tpl-right-bar').css('right','-1500px')})
$('.theme-item').on('click',function(e){let id=$(this).attr('theme-id');let head_bg=$(this).find('.theme-head').attr('bg');let head_color=$(this).find('.theme-head').attr('color');let side_bg=$(this).find('.theme-side').attr('bg');let side_color=$(this).find('.theme-side').attr('color');let logo_bg=$(this).find('.theme-logo').attr('bg');let logo_color=$(this).find('.theme-logo').attr('color');let style='';style+="<style class='theme-style'>";style+=".tpl-app .tpl-header .tpl-header-item{background-color: "+head_bg+"!important}";style+=".tpl-app .tpl-header .tpl-header-item *{color: "+head_color+" !important}";style+=".tpl-side{background-color: "+side_bg+" !important}";style+=".tpl-side *{color: "+side_color+" !important}";style+=".tpl-side *{color: "+side_color+" !important}";style+=".tpl-side-menu .tpl-nav .nav-item .child-nav li a span,.tpl-side-menu .tpl-nav .nav-item .child-nav li a i{color: #777 !important}";style+=".tpl-user-image {background-color: "+logo_bg+"}";style+=".tpl-user-image .user-name {color: "+logo_color+"}";style+="</style>";$('body').find('.theme-style').remove();$('body').append(style);$.ajax({url:'xxx/site_index',type:'post',data:{theme_id:id},success:function(d){console.log(d);}})})
carousel.render({elem:'.tpl-carousel',width:'100%',height:'auto',arrow:'none'});$('.question-o').hover(function(e){let val=$(this).attr("tip");layer.tips(val,$(this),{tips:[2,'rgba(0,0,0,0.85)']});})
$(".tpl-select").on('click',function(){if($(this).hasClass('selected')){$(this).removeClass('selected');}else{$(this).addClass('selected');}})
$('.type_list').on('click','.el',function(){$(".tpl-select").attr('value',$(this).attr('value'))
$('.type_list').find('.active').removeClass('active');$(this).addClass('active');$('.tpl-select').children('.selected_text').text($(this).text());})
$('.screen').on('click',function(){if($(this).hasClass('full')){$(this).find('i').removeClass('layui-icon-screen-restore').addClass('layui-icon-screen-full');$(this).removeClass('full');exitFullscreen();}else{$(this).addClass('full');$(this).children('i').removeClass('layui-icon-screen-full').addClass('layui-icon-screen-restore');requestFullScreen();}})
function stopPropagation(e){var ev=e||window.event;if(ev.stopPropagation){ev.stopPropagation();}else if(window.event){window.event.cancelBubble=true;}};function requestFullScreen(){var de=document.documentElement;if(de.requestFullscreen){de.requestFullscreen();}else if(de.mozRequestFullScreen){de.mozRequestFullScreen();}else if(de.webkitRequestFullScreen){de.webkitRequestFullScreen();}}
function exitFullscreen(){var de=document;if(de.exitFullscreen){de.exitFullscreen();}else if(de.mozCancelFullScreen){de.mozCancelFullScreen();}else if(de.webkitCancelFullScreen){de.webkitCancelFullScreen();}}})